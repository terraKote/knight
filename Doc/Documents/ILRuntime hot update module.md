# ILRuntime hot update management
* ILRuntime library is a library written in C# to interpret and run C# IL code, which can be run under the IOS system. ILRuntime is used in the framework to realize hot update of code logic based on C# DLL.
* The address of ILRuntime library: https://github.com/Ourpalm/ILRuntime

## Hot Update Module
* The code of the hot update module is under Assets/Framework/Hotfix.
* The hot update function is realized through ILRuntime and reflection call respectively, and these two modes can be switched by one switch with one key.

## MonoBehaviour proxy class HotfixMBContainer
* ILRuntime library does not recommend using MonoBehaviour directly on the hot update side. Therefore, the framework provides a HofixMBContainer class to obtain references to objects in Prefab, and at the same time the agent executes APIs such as Awake Start Update Destroy Enable Disable in the MonoBehaviour class.
* ![HofixMBContainer](/Doc/res/images/hofix_1.png)

* HofixClassName: is the namespace + class name in the hot update DLL.
* HofixNeedUpdate: In order to optimize efficiency, a flag is provided to indicate whether the Update API needs to be executed.
* Obejects: Object references in Prefab.

## Heat more logic template class THofixMB
* There is a THotfixMB template class in Regen DLL, which is the base class of all logic scripts in Regen. The logic script implements the game logic by inheriting him and rewriting his virtual functions.
* ![THotfixMB](/Doc/res/images/hofix_2.png)

* As shown above, the framework provides the use of Attribute tags to achieve data binding and event binding. HotfixBinding is used to bind reference objects in HofixMBContainer, and HotfixBindingEvent is used to bind events generated by Prefab.

* The method for an object in Prefab to trigger an event: hang a HotfixEventTrigger script on the object node, select the corresponding event type, and set the object that generates the event.
* ![THotfixMB](/Doc/res/images/hofix_3.png)

* The above functions allow the hot update terminal to have normal Unity programming capabilities. On this basis, you can build any game logic structure you want on the hot update side.
* The game logic structure in the current framework uses a single master control script to control the initialization and update operations of the game logic. The script name is GameLogicManager.